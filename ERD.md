<img src="http://www.2cto.com/uploadfile/2015/0618/20150618022140928.png">

关系数据库模型是DBMS软件组成部分的基础。DBMS软件包用于实现目前大多数的操作型和分析型数据库。
关系DBMS软件包括Oracle、MySQL、Microsoft SQL Server、PostgreSQL、IBM DB2以及Teradata。
在这些DBMS工具中，Teradata适用于大型分析型数据库，其他的DBMS可同时用于操作型数据库和分析型数据库。


## ER 建模基本构建
ER建模后得到的ER图（ER diagram，ERD）是整个数据库的蓝图。实体(entity)和联系(relationship)是ER图的两个基本构件。目前还没有一个所有数据库都遵循的通用ER符号体系。相反，当前采用的ER符号体系种类繁多。虽然采用来自不同符号体系的ER符号来表示实体和联系时差异巨大，但其含义通常是相同的。

## 实体
实体是ER图的基本组件，用于描述数据库所记录的内容。实体可以表示现实世界中的众多概念，如人、地点、对象、事件、项目等。例如，一个零售公司的ER图可能包含顾客（CUSTOMER）、商店（STORE）、产品（PRODUCT）和交易额（SALES TRANSACTION）四个实体。
 
ER图用矩形代表实体，实体名写在矩形里面，同一个ER图中的不同实体应该有不同名字。图2-1展示了CUSTOMER及STORE两个实体的例子。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618034900418.png">

图2-1中每个实体包含多个实体实例/实体成员（entity instance/entity member），如实体CUSTOMER可能包含Joe、Sue、Pat等实例。实体本身需要画在ER图中，实体实例虽然不需要表示在ER图中，但会被记录到根据该ER图所创建的数据库之中

## 属性(唯一和非唯一)
ER图中每个实体都有属性，实体的一个属性描述该实体的一种特征。由于实体表示的是数据库所记录内容的组件，因而实体属性表示每个实例需要记录的细节。例如，对实体CUSTOMER可以记录以下属性：编号（CustID）、姓名（CustName）、生日（CustBDate）、性别（CustGender）。图2-2描述了如何将属性填入ER图中：每个属性由一个写有属性名字的椭圆表示，同一个实体的不同属性名字不同，每个椭圆用一条线连接到相应实体。唯一属性（unique attribute）是指可以唯一标识实体实例的属性。通常来说一个实体至少要有一个唯一属性。如图2-2所示，ER图中实体的唯一属性都带有下划线。该图所示的数据库需求表明，每个顾客的编号必须唯一，但两个或多个顾客的生日、姓名或性别则可以相同。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035422489.png">

## 联系
ER图中每个实体必须通过联系至少与一个其他实体相关联。在ER图中联系表示为一个菱形，菱形中间写有代表联系名字的词或短语，菱形与所有参与该联系的实体进行连线。
### 基数约束 Cardinality Constraint
ER图中，在实体与联系的连线上往往写有一些符号，这些符号就是基数约束（cardinality constraint）。基数约束用于表示该实体可以有多少实例与另一实体的实例存在联系。考虑图2-3中的ER图，菱形“ReportsTo”表示实体EMPLOYEE和实体DEPARTMENT之间的联系。而表示基数约束的符号则常常写于实体和联系之间靠近实体一端的连线上。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035234234.pnghttp://www.2cto.com/uploadfile/2015/0618/20150618035234234.png">

每个基数约束包含以下两个部分：
* 最大基数（maximum cardinality）——靠近实体一端的基数约束部分；
* 最小基数/参与（minimum cardinality/participation）——远离实体一端的基数约束部分。
* 最大基数可以是一个（表示为“|”）或多个（表示为“?”）。
* 最小基数可以是可选的（表示为“0”）或者是强制的（表示为“|”）。

图2-4列出了实体A与联系B之间所有四种可能的基数约束。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035259565.png">

接下来将以图2-3中包含关系ReprotsTo的ER图为例说明基数约束的概念。以下是
图2-3中ER图的基本需求：

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035325223.png">

1. 数据库将记录职员（employee）和部门（department）信息。
1. 对每个职员记录其姓名及唯一职员编号（employeeID）。
1. 对每个部门记录其唯一部门编号（departmentID）和位置。
1. 每个职员必须且只能为一个部门作报告。一个部门可以有许多职员为其报告，但也可以没有任何职员。

首先考虑图2-3中ReprotsTo菱形右侧的基数约束符号“||”。强制参与符号（本例中的左侧竖线）表示每个职员必须至少为一个部门作报告。换言之，关系ReortsTo的EMPLOYEE实体的最大基数约束是1。最大基数约束符号一个（本例中的右侧竖线）表示每个职员至多可以为一个部门作报告。因此，这两个符号放在一起，表示每个职员必须且只能为一个部门作报告。

接下来考虑ReportsTo菱形左侧的基数约束符号“?0”。可选参与符号（0）表示部门可以没有职员来作报告，换言之，ReportsTo关系中的DEPARTMENT实体的最小基数约束是0，最大基数约束多个（?）表示一个部门可能有多个职员来作报告。因此，这两个符号放在一起表示每个部门可以有多个职员来作报告，但也可以没有。换言之，一个部门最少有0个职员，最多有多个职员。
 
注意，解释ER图中联系的合理方法，是利用**矩形–菱形–基数约束–矩形**规则分别**从相反方向分两次**来考虑这个关系。例如，联系ReportsTo就可以解释成：
 
* 一个方向：**矩形（职员）–菱形（作报告）–基数约束（有且仅有一个）–矩形（部门）**；
 
* 另一个方向：**矩形（部门）–菱形（接受报告）–基数约束（从0到多个）–矩形（职员）**。
 
为进一步重申关系和基数约束的概念，本书接下来将在图2-5中给出ReportsTo联系的几种可能版本（为简洁起见，省略了实体属性）。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035325223.png">

以下是每个版本的需求:
* 版本A：每个职员必须且只能为一个部门作报告。一个部门可能同时有多个职员作报告，也可能没有。
* 版本B：一个职员可以为一个或者不为任何部门作报告。一个部门可以同时有多个职员作报告，也可能没有任何职员。
* 版本C：每个职员必须且只能为一个部门作报告。一个部门必须有至少一个职员作报告，也可以同时有多个职员。
* 版本D：一个职员可以为一个或者不为任何部门作报告。一个部门必须有至少一个职员作报告，也可以同时有多个职员。

## 联系类型（最大基数侧）
联系两侧的最大基数约束可为一个或者多个。因此，若不考虑最小基数而仅考虑最大基数，则联系共有以下几种情况：
 
* 一对一联系（1∶1）
* 一对多联系（1∶M)
* 多对多联系（M∶N)
图2-6给出了这三种类型的联系及其最大基数侧（由于最小基数不影响最大基数，为简明起见，将其省略）。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035532647.png">

图2-3和2-5给出了1∶M联系的例子。图2-7的例子同样也是1∶M联系，该联系反映了如下需求：
 
每个商店（store）必须且只能位于一个区域（region）。每个区域内至少要有一个商店，当然也可以有多个商店。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035551529.png">

图2-8给出了一个M∶N联系的例子，反映的需求如下：
 
一个职员（employee）可能分配了多个项目（project），但也可能一个项目也没有。一个项目至少应分配给一个职员，当然也可以分给多个职员共同完成。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035615931.png">

图2-9给出了一个1∶1联系，反映的需求如下：
 
每个职员（employee）要么分有一辆车（vehicle），要么一辆也没有。每辆车必须且只能分给一个职员。

<img src="http://www.2cto.com/uploadfile/2015/0618/20150618035636846.png">

